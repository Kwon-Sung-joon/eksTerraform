apiVersion: apps/v1                                           
kind: Deployment                                              
metadata:
  name: ksj-web                                              
  labels:
    app: ksj-web                                              
spec:
  replicas: 1                                           
                                                            
  selector:                                              
    matchLabels:
      app: ksj-web
  template:                                            
    metadata:
      labels:
        app: ksj-web                                               
    spec:
      containers:
      - name: tomcat
        image: 049474991519.dkr.ecr.ap-northeast-2.amazonaws.com/ksj-ecr-repo:tomcat9
        imagePullPolicy: Always
        ports:
        - containerPort: 8009
          name: ajp
        - containerPort: 8080
          name: tomcat

      - name: apache                                            
        image: 049474991519.dkr.ecr.ap-northeast-2.amazonaws.com/ksj-ecr-repo:apache2                                               
        imagePullPolicy: Always
        ports:
        - containerPort: 80
          name: http
      nodeSelector:
              topology.kubernetes.io/zone: ap-northeast-2a
